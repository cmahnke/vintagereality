{{ $class := .Params.type }}
<div class="post {{ $class }}">
  <div class="content">

    {{- partial "post-header.html" . -}}

    <div class="post-body">
      {{- partial "content.html" . -}}
      {{/* TODO: Finish display of section contents */}}
    </div>
    {{- if .IsSection -}}
      <div class="sections-contents article-list">
        {{ range where .Site.Pages "Section" .Section }}
          {{ partial "list-item.html" . }}
        {{ end }}
      </div>
    {{- end -}}
  </div>
</div>

{{- define "partials/post-header.html" -}}
  <div class="post-header">
    <h1 class="post-title">{{ .Title }}</h1>
    {{- if not .Params.metaPage -}}
      <div class="post-meta">
        <div class="date">
          <a href="{{ .RelPermalink }}">{{- partial "date.html" (dict "date" .Date "language" $.Page.Language "months" $.Site.Data.months) -}}</a>
        </div>
        {{ partial "meta/tags.html" . }}
        {{- if ne .CurrentSection.Path "/post" -}}
          <div class="parent-section">
            {{- $partOf := printf "%s: %s" (i18n "partOf") .CurrentSection.Title -}}
            <a href="{{ .CurrentSection.RelPermalink }}" title="{{ $partOf }}">{{ $partOf }}</a>
          </div>
        {{- end -}}
      </div>
    {{- end -}}
  </div>
{{- end -}}
